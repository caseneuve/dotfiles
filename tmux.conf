#############################################
###             MY TMUX CONF 
#############################################
# Last update: 02.11.18, 22:04:03 @x200

# Doc: -> ~/.tmux.conf
# TODO: poprawić opisy i zrobić porządek w outline > done:? 14/05/2018

## >> { GENERAL: }
#   MOUSE ON
set -g mouse on
#   display time
set-option -g display-time 1000

## >> { KBD: }
# >>> {{ PREFIX }}
set -g prefix C-Space
#   BIND 'C-SPACE C-SPACE' OR 'C-SPACE SPACE' TO TYPE 'C-SPACE'
bind C-Space send-prefix
bind Space   send-prefix
unbind C-b

# >>> {{TMUX RELOAD}}
bind r source-file ~/.tmux.conf \; display "Config file reloaded!"

# >>> {{MANAGE SESSIONS}}
bind S new-session

# >>> {{COPY MODE}}
bind a copy-mode
bind-key    -T copy-mode    i               send-keys -X cursor-up
bind-key    -T copy-mode    k               send-keys -X cursor-down
bind-key    -T copy-mode    l               send-keys -X cursor-right
bind-key    -T copy-mode    j               send-keys -X cursor-left
bind-key    -T copy-mode    u               send-keys -X previous-word
bind-key    -T copy-mode    o               send-keys -X next-word
bind-key    -T copy-mode    \;              send-keys -X end-of-line
bind-key    -T copy-mode    h               send-keys -X start-of-line
bind-key    -T copy-mode    "-"             send-keys -X page-up
bind-key    -T copy-mode    M->             send-keys -X history-bottom
bind-key    -T copy-mode    M-<             send-keys -X history-top

# >>> {{PANES & WINDOWS}}
# unbind 
unbind '"' # unbind horizontal split
unbind %   # unbind vertical split

# >>> {{{NEW SPLIT IN CURRENT PANE (HORIZONTAL / VERTICAL)}}}
bind-key \ split-window -h # split pane horizontally
bind-key / split-window -v # split pane vertically

# >>> {{{LIST PANES}}}
bind-key C-l list-panes
# >>> {{{BREAK-PANE = MAKE NEW WINDOWS OF PANES}}}
bind-key Enter break-pane

# >>> {{{USE MOTION KEYS TO MOVE BETWEEN PANES}}}
bind-key j select-pane -L
bind-key k select-pane -D
bind-key i select-pane -U
bind-key l select-pane -R

# >>> {{{RESIZING}}}
bind-key J resize-pane -L
bind-key K resize-pane -D
bind-key 8 resize-pane -U
bind-key L resize-pane -R

#   PREVIOUS PANE
# bind-key -n C-up prev
# bind-key -n C-left prev
#   NEXT PANE
# bind-key -n C-right next
# bind-key -n C-down next

# >>> {{{WINDOWS}}}
bind-key C-k swap-window -t -1
bind-key C-i swap-window -t +1
bind-key C-j swap-window -t 1
bind-key C-l last-window
bind-key C-p last-pane

# >>> {{{SCRIPTS}}}
bind-key C-h new-window -n 'hg'    'hangups'
bind-key C-e new-window -n 'emx'   'emacsclient -nw'
bind-key C-n new-window -n 'notes' '~/.dotfiles/bin/notes.sh'
bind-key C-c new-window -n 'cal'   'calcurse'
bind-key C-r new-window -n 'rng'   'ranger'
bind-key C   clock-mode

bind-key \;  select-window -t:{end}
bind-key h   select-window -t:^

# >>> {{{KILL SESSION}}}
bind-key C-x kill-session

## >> {STATUS BAR:}
# >>> {{GENERAL}}
#set-option -g status-utf8 on
set-option -g status-justify centre 
set-option -g status-bg default 
set-option -g status-fg default
set-option -g status-interval 1
set-option -g status-left-length 50

# >>> {{LEFT}}
set-option -g status-left '#[fg=green,bg=default,bold] #S #[fg=yellow]#I #[default]'
#set-option -g status-left '#[fg=green,bg=black,bold] #S #[fg=yellow]#I #[default]'
#set-option -g status-left ' #[fg=colour11][#I] #[fg=colour9,bold]#T#[default]'

# >>> {{CENTER}}
set-option -g visual-activity on
setw -g automatic-rename on
set -g base-index 1
set-window-option -g window-status-format '#[fg=blue,bg=brightblack]#I:#W#F#[fg=default]'
set-window-option -g window-status-current-format '#[fg=white,bg=red,bold]#I:#W#[fg=dim]#F'
set-window-option -g monitor-activity off

# >>> {{RIGHT}}
set-option -g status-right '#[fg=blue,bg=default] %a, %d %b, %H:%M:%S '
#set-option -g status-right '#[fg=blue,bg=black] %H:%M:%S, #T '
#set-option -g status-right '#[fg=colour13,bold]###S '

#   TITLES
set-option -g set-titles on
#   THIS IS NECESSARY FOR I3 SCRATCHPAD TO WORK (LOOK → I3 SCRATCHPAD DROPDOWN)
set-option -g set-titles-string 'dropdown'

## >> {PLUGINS}:
#  to make it work use: prefix-I; update: prefix-U
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-urlview'
set -g @plugin 'tmux-plugins/tmux-yank'

# INITIALIZE TMUX PLUGIN MANAGER
# !!! >> KEEP THIS LINE AT THE VERY BOTTOM OF TMUX.CONF << !!!
run-shell ~/.tmux/plugins/tpm/tpm
run-shell ~/.tmux/plugins/tmux-urlview/urlview.tmux

############################################################
## >> {OLD}:
# set -g status-bg black
# set -g status-fg white
# set -g window-status-current-bg white
# set -g window-status-current-fg black
# set -g window-status-current-attr bold
# set -g status-interval 60
# set -g status-left-length 30
# set -g status-left '#[fg=green](#S) #(whoami)'
# set -g status-right '#[fg=yellow]#(cut -d " " -f 1-3 /proc/loadavg)#[default] #[fg=white]%H:%M#[default]'

