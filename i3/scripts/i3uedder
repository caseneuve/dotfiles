#!/bin/bash

# Path:        ~/.dotfiles/i3/scripts/i3uedder
# Created:     2019-03-25, 10:13    @lenovo
# Last update: 2019-03-26, 12:59:28 @x200
# Doc:

OUTPUT=$(
    curl -Ss 'https://wttr.in?0&T&Q' 2>/dev/null | cut -c 16- | head -2 | xargs echo
      )

case $OUTPUT in
    Sunny|Clear)      INDICATOR="üå£ ";;
    *cloudy*) INDICATOR="üå§ ";;
    *Rain*)  INDICATOR="üåß ";;
    Overcast)   INDICATOR="‚òÅ ";;
    *)          INDICATOR="‚õÖ " ;;
esac
COL=$((${#OUTPUT} - 6))

[[ -n $OUTPUT ]] && echo $INDICATOR

case $BLOCK_BUTTON in
    #1 = Left, 2 = Middle, 3 = Right, 4 = Scroll Up, 5 = Scroll Down
    1) notify-send "$(printf '%s%*s%s' Wttr.in $COL $INDICATOR)" \
                   "$OUTPUT" &&  pkill -RTMIN+5 i3blocks
esac
