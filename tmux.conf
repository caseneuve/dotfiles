#######################################
##                                   ##
##    _|_  _  _  _                   ##
##     |  / |/ |/ |  |   |  /\/      ##
##     |_/  |  |  |_/ \_/|_/ /\_/    ##
##                                   ##
#######################################
# Last update: 2019-04-08, 18:14:22 @x200

# Doc: -> ~/.tmux.conf
# TODO: poprawić opisy i zrobić porządek w outline > done:? 14/05/2018

## >> {GENERAL:}
#   MOUSE ON
set -g mouse on
#   display time
set-option -g display-time 1000
set -g default-terminal "tmux-256color"

## >> KBD:
# >>> {{prefix}}
set -g prefix C-Space
#   BIND 'C-SPACE C-SPACE' OR 'C-SPACE SPACE' TO TYPE 'C-SPACE'
bind C-Space send-prefix
# bind Space   send-prefix
unbind C-b

# >>> {{tmux reload}}
bind r source-file ~/.tmux.conf \; display "Config file reloaded!"

# >>> {{manage sessions}}
bind S new-session

# >>> {{copy mode}}
bind a copy-mode
bind-key    -T copy-mode    x               send-keys -X begin-selection
bind-key    -T copy-mode    c               send-keys -X copy-selection
bind-key    -T copy-mode    k               send-keys -X cursor-up
bind-key    -T copy-mode    j               send-keys -X cursor-down
bind-key    -T copy-mode    f               send-keys -X cursor-right
bind-key    -T copy-mode    b               send-keys -X cursor-left
bind-key    -T copy-mode    u               send-keys -X previous-word
bind-key    -T copy-mode    o               send-keys -X next-word
bind-key    -T copy-mode    \;              send-keys -X end-of-line
bind-key    -T copy-mode    h               send-keys -X start-of-line
bind-key    -T copy-mode    "-"             send-keys -X page-up
bind-key    -T copy-mode    G               send-keys -X history-bottom
bind-key    -T copy-mode    g               send-keys -X history-top

## >> {{PANES & WINDOWS}}
# unbind 
unbind '"' # unbind horizontal split
unbind %   # unbind vertical split

# >>> {{{new split in current pane (horizontal / vertical)}}}
bind-key \ split-window -h # split pane horizontally
bind-key / split-window -v # split pane vertically

# >>> {{{list panes}}}
bind-key C-l list-panes
# >>> {{{break pane = make new windows of panes}}}
bind-key Enter break-pane
# >>> {{{toggle zoom = toggle focus on this current pane only}}}
bind-key Space resize-pane -Z  

# >>> {{{use motion keys to move between panes}}}
bind-key j select-pane -L
bind-key k select-pane -D
bind-key i select-pane -U
bind-key l select-pane -R

# >>> {{{resizing}}}
bind-key J resize-pane -L
bind-key K resize-pane -D
bind-key 8 resize-pane -U
bind-key L resize-pane -R

#   PREVIOUS PANE
# bind-key -n C-up prev
# bind-key -n C-left prev
#   NEXT PANE
# bind-key -n C-right next
# bind-key -n C-down next

bind-key B break-pane

# >>> {{{windows}}}
bind-key C-k swap-window -t -1
bind-key C-i swap-window -t +1
bind-key C-j swap-window -t 1
bind-key C-l last-window
bind-key C-p last-pane

# >>> {{{start app in new window}}}
bind-key C-h new-window -n 'hg'    'hangups'
bind-key C-e new-window -n 'emx'   'emacsclient -nw'
bind-key C-n new-window -n 'notes' '~/.dotfiles/bin/notes.sh'
bind-key C-c new-window -n 'cal'   'calcurse'
bind-key C-r new-window -n 'rng'   'ranger'
bind-key C-w new-window -n 'wee'   'weechat'
bind-key C-m new-window -n 'mail'  'neomutt'
bind-key C   clock-mode
#bind-key C-w new-window -n 'wee'   'source ~/.virtualenvs/weechatpy2/bin/activate && weechat'

bind-key \;  select-window -t:{end}
bind-key h   select-window -t:^

# >>> {{{kill session}}}
bind-key C-x kill-session

# >>> active pane colors
set -g pane-active-border-fg yellow
set -g pane-border-fg black 

## >> {STATUS BAR:}
# >>> {{general}}
#set-option -g status-utf8 on
set-option -g status-justify centre 
set-option -g status-bg default 
set-option -g status-fg default
set-option -g status-interval 1
set-option -g status-left-length 50

# >>> {{left}}
set-option -g status-left '#[fg=green,bg=default,bold] #S #[fg=yellow]#I #[default]'
#set-option -g status-left '#[fg=green,bg=black,bold] #S #[fg=yellow]#I #[default]'
#set-option -g status-left ' #[fg=colour11][#I] #[fg=colour9,bold]#T#[default]'

# >>> {{center}}
set-option -g visual-activity on
set-window-option -g monitor-activity off
setw -g automatic-rename on
set -g base-index 1
set-window-option -g window-status-format '#[fg=blue,bg=default,noreverse]#I:#W#F#[fg=default]'
set-window-option -g window-status-current-format '#[fg=black,bg=blue]#I:#W#[fg=dim]#F'
# set-window-option -g window-status-current-format '#[fg=black,bg=yellow,bold]#I:#W#[fg=dim]#F'

# >>> {{right}}
set-option -g status-right '#[fg=blue,bg=default] %a, %d %b, %H:%M:%S '
#set-option -g status-right '#[fg=blue,bg=black] %H:%M:%S, #T '
#set-option -g status-right '#[fg=colour13,bold]###S '

# {- 20/03/2019 ?? --------------------------------
# czy to w ogóle działa?
#set-option -g visual-bell off
#set-window-option -g window-status-activity-bg 'red'
#set-window-option -g monitor-activity on
set -g window-status-activity-style 'bg=yellow,fg=white'
# set -g window-status-bell-style 'bg=red,fg=white'
# set -g monitor-activity off
# ------------------------------------------------}

# TITLES
set-option -g set-titles on
#   THIS IS NECESSARY FOR I3 SCRATCHPAD TO WORK (LOOK → I3 SCRATCHPAD DROPDOWN)
set-option -g set-titles-string 'dropdown'

## >> {PLUGINS}:
#  to make it work use: prefix-I; update: prefix-U
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-urlview'
set -g @plugin 'tmux-plugins/tmux-yank'

# INITIALIZE TMUX PLUGIN MANAGER
# !!! >> KEEP THIS LINE AT THE VERY BOTTOM OF TMUX.CONF << !!!
run-shell ~/.tmux/plugins/tpm/tpm
run-shell ~/.tmux/plugins/tmux-urlview/urlview.tmux
