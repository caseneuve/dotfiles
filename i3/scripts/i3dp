#!/bin/bash

# Path:        ~/.dotfiles/i3/bin/i3dp.sh
# Created:     10.07.18, 18:45    @x200
# Last update: 17.07.18, 10:28:43 @x200

# Doc: note: requires dropbox-cli (AUR)

GLYPH="ÔÉÇ"
#GLYPH="ÔÄ°"
#GLYPH=ùîª
NOT=`dropbox-cli status | grep "isn't"`
URU=`dropbox-cli status | grep -i "uruchamianie"`
SYNC=`dropbox-cli status | grep -i "synchronizowanie"`

if [[ $NOT ]]; then
    echo "<span bgcolor='#00001f26'><span color='#C0392B'> $GLYPH </span></span>" # ùîª!
elif [[ $URU ]]; then
    echo "<span bgcolor='#2980b9'><span color='#ffffff'> $GLYPH </span></span>" # ùîª!
elif [[ $SYNC ]]; then
    echo "<span fgcolor='#27AE60'><span bgcolor='#ffffff'> $GLYPH </span></span>" #ùîª‚Üì‚Üë
else
    pkill -RTMIN+13 i3blocks
fi

case $BLOCK_BUTTON in
    # left click 
    1) if [[ $NOT ]]; then
           notify-send -u critical "Dropbox status:
--------------" "$(dropbox-cli status)" -i ~/box/Dropbox/.Config/dropbox-logo.png && exit 0
       elif [[ $URU ]]; then
           notify-send "Dropbox status:
--------------" "$(dropbox-cli status)" -i ~/box/Dropbox/.Config/dropbox-logo.png && exit 0
       elif [[ $SYNC ]]; then
           notify-send -u low "Dropbox status:
--------------" "$(dropbox-cli status)" -i ~/box/Dropbox/.Config/dropbox-logo.png && exit 0
       fi
       ;;
esac

